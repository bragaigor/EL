Test6

// should return the result of the tester function
// for i = 0; i < 20 call tester
DEF main 0
	// Call tester 20 times
	PUSH_CONSTANT 20
	POP_LOCAL 2
	PUSH_CONSTANT 0
	POP_LOCAL 1

LOOP_START:
	CALL tester 0
	POP_LOCAL 3
	PUSH_LOCAL 3
	PRINT_STRING "tester returned "
	PRINT_INT64
	PRINT_STRING "\n"

	PUSH_LOCAL 1
	PUSH_CONSTANT 1
	ADD
	POP_LOCAL 1
	PUSH_LOCAL 1
	PUSH_LOCAL 2
	JMPL LOOP_START
	
	PUSH_LOCAL 3
	RET
end

DEF tester 0
	PUSH_CONSTANT 0
	POP_LOCAL 1
	PUSH_CONSTANT 15438956
	POP_LOCAL 2
	PUSH_CONSTANT 4
	POP_LOCAL 0
LOOP_START:
	PUSH_LOCAL 0
	PUSH_CONSTANT 7
	MUL
	PUSH_CONSTANT 8
	ADD
	PUSH_CONSTANT 4
	MUL
	PUSH_CONSTANT 2
	MUL
	PUSH_CONSTANT 4
	ADD
	POP_LOCAL 0

	PUSH_LOCAL 1
	PUSH_CONSTANT 1
	ADD
	POP_LOCAL 1
	PUSH_LOCAL 1
	PUSH_LOCAL 2
	JMPL LOOP_START
	
	PUSH_LOCAL 0
	RET
end
